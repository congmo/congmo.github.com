
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>葱末COngMo</title>
  <meta name="author" content="xiaori.liu">

  
  <meta name="description" content="I recently wrote a guest post for the RubyLearning blog entitled &#8220;How do I build DSLs with yield and instance_eval?&#8221;. It gives a brief &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://congmo.github.com">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="葱末COngMo" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href='http://fonts.googleapis.com/css?family=Rock+Salt' rel='stylesheet' type='text/css'>
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">葱末COngMo</a></h1>
  
    <h2>与人玫瑰，手有余香.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:congmo.github.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/02/01/test-chinese/">Guest Post on RubyLearning: 中文Building DSLs With Yield and Instance_eval</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-02-01T00:00:00+08:00" pubdate data-updated="true">Feb 1<span>st</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I recently wrote a guest post for the RubyLearning blog entitled <a href="http://rubylearning.com/blog/2010/11/30/how-do-i-build-dsls-with-yield-and-instance_eval/">&#8220;How do I build DSLs with yield and instance_eval?&#8221;</a>. It gives a brief overview of how to use Ruby to build simple internal DSLs. Enjoy!</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/01/17/2/">MultiJSON: The Swappable JSON Handler</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-01-17T00:00:00+08:00" pubdate data-updated="true">Jan 17<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><span class="caps">JSON</span> has become ubiquitous. From Facebook and Twitter both declaring it to be the preferred (and in some cases only) option for <span class="caps">API</span> access to the new OAuth 2.0 draft spec declaring that <span class="caps">JSON</span> is the only acceptable response format for OAuth token responses, <span class="caps">JSON</span> is here to stay. What isn&#8217;t ubiquitous, however, are people&#8217;s preferred implementations.</p>
<p>As library authors it is our duty to try to support as large a part of the community as possible and do so in a friendly manner. To that end, today we&#8217;re releasing <strong>MultiJSON</strong>, a simple library that allows you to seamlessly provide multiple <span class="caps">JSON</span> backends for your library with intelligent defaulting. Install with a simple <code>gem install multi_json</code> and then get started like so:</p>
<div>
<pre><code class='ruby'>require 'multi_json'
<ol>
	<li>Decode using default engine.<br />
MultiJson.decode(&#8216;{&quot;abc&quot;:&quot;def&quot;}) # =&gt; {&quot;abc&quot; =&gt; &quot;def&quot;}&#8217;)</li>
</ol>
<ol>
	<li>Set an engine using a symbol.<br />
MultiJson.engine = :active_support</li>
</ol>
<ol>
	<li>Encode using ActiveSupport<br />
MultiJson.encode({:abc =&gt; &quot;def&quot;}) # =&gt; &#8216;{&quot;abc&quot;:&quot;def&quot;}&#8217;</code></pre><br />
</div></li>
</ol>
<p>This gem is primarily for library authors, allowing you to use the best <span class="caps">JSON</span> available on the users&#8217; systems without explicitly requiring one library over another. This way you can be sure that your <span class="caps">JSON</span> handling will work across implementations (e.g. JRuby) as well as requiring as little extra code as possible (the gem detects existing libraries before requiring more by default).</p>
<p>Engines supported by default are:</p>
<ul>
	<li><code>yajl-ruby</code></li>
	<li><code>json</code> (gem)</li>
	<li><code>active_support</code></li>
	<li><code>json_pure</code></li>
</ul>
<p>We hope that this will make development of <span class="caps">JSON</span>-relying libraries a little bit less of a headache for library authors and users alike. The code is, as always, <a href="http://github.com/intridea/multi_json">available on GitHub</a>.</p></div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/01/16/testtesttest/">Teesesest</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-01-16T00:00:00+08:00" pubdate data-updated="true">Jan 16<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>ddddddddddddddddddddddddddddd
ddddddddddddddddddddddddddddd
dddddddddddddddddddddddddddddddddd
dddddddddddddddddddddddddddddddd
ddddddddddddddddddddddddddd</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/11/30/rubylearning-guest-post/">Guest Post on RubyLearning: Building DSLs With Yield and Instance_eval</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-11-30T00:00:00+08:00" pubdate data-updated="true">Nov 30<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I recently wrote a guest post for the RubyLearning blog entitled <a href="http://rubylearning.com/blog/2010/11/30/how-do-i-build-dsls-with-yield-and-instance_eval/">&#8220;How do I build DSLs with yield and instance_eval?&#8221;</a>. It gives a brief overview of how to use Ruby to build simple internal DSLs. Enjoy!</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/10/03/omniauth-flexible-authentication-for-rack/">OmniAuth: Flexible, Unassuming Multi-Provider Authentication for Rack</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-10-03T00:00:00+08:00" pubdate data-updated="true">Oct 3<span>rd</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>The web application landscape has changed drastically in the past year or two. Where once every site was a silo unto itself and could reasonably expect users to create a unique login and password for each site, it is now a different story. I sigh every time I have to fill out yet another registration form, wishing instead for a simple &#8220;Connect with Facebook&#8221;, &#8220;Sign in with Twitter&#8221;, or &#8220;Log in with OpenID&#8221;. At the same time, services are more interconnected than ever. One of the best ways to increase the popularity and viability of a new service is by piggybacking it onto the existing user bases of apps such as Twitter, Facebook, and Foursquare.</p>

<p>There are lots of authentication solutions out there for Rails. Many of them even have ways to connect to services such as Facebook or Twitter. But as I used these in project after project I noticed an emerging pattern: they all make too many assumptions about how I want to handle authentication in my application. Sure that makes it a quick start for the vanilla use case, but I honestly can&#8217;t think of a time when I&#8217;ve dropped in an authentication solution and I was good to go. It&#8217;s time for a change in perspective.</p>

<p style='float:right;margin:0 0 5px 10px;'><img src='http://img.skitch.com/20101004-mx5x9s6ysnw25jaacgihrrxhdf.png'/></p>

<h3>OmniAuth: The Unassuming Authentication Library</h3>

<p>Today is the public release of <a rel="nofollow" target="_blank" href="http://github.com/intridea/omniauth">OmniAuth</a>. OmniAuth is a Rack-based authentication system that abstracts away the gritty, difficult parts of external authentication without assuming anything about what you actually want to do with that authentication information.</p>

<p>What does this mean for you? This means that you can make your app authenticate through Twitter, Facebook, LinkedIn, Google Apps, GitHub, Foursquare, and more and then <em>have complete control from there</em>.</p>

<h3>Installation</h3>

<p>OmniAuth is available as a gem:</p>

<pre><code>gem install omniauth
</code></pre>

<h3>Diving In</h3>

<p>Using OmniAuth is as simple as using any other Rack middleware. Of course, that&#8217;s because OmniAuth is simply a Rack middleware. No complicated framework-specific configuration, just a collection of middleware to take the pain out of external authentication. Let&#8217;s say I have a Sinatra app that I want to be able to authenticate via Twitter or Facebook. Here&#8217;s what&#8217;s required:</p>

<pre class='ruby'>require 'omniauth'
use Rack::Session::Cookie # OmniAuth requires sessions.
use OmniAuth::Builder do
  provider :twitter, "CONSUMER_KEY", "CONSUMER_SECRET"
  provider :facebook, "APP_ID", "APP_SECRET"
end</pre>

<p>That&#8217;s it! Now if I want to send my user to authenticate via Twitter, I send them to the URL <code>/auth/twitter</code>. For Facebook, <code>/auth/facebook</code>. The user will automatically be redirected to the appropriate site where they will be able to authenticate. Once authentication is complete, they will be redirected back to <code>/auth/providername/callback</code> and OmniAuth will automatically fill the <code>omniauth.auth</code> environment key with information about the user, so for my Sinatra client I just need to add:</p>

<pre class='ruby'>get '/auth/:provider/callback' do
  auth = request.env['omniauth.auth']
  "Hello, #{auth['user_info']['name']}, you logged in via #{params['provider']}."
end</pre>

<p>Of course, I could do a lot more than just print out the user&#8217;s name. I could also:</p>

<ul>
<li>Check for an existing user via the <code>uid</code> key of the auth hash and log them in if one exists.</li>
<li>Create a user based on the <code>uid</code> and information from the <code>user_info</code> hash.</li>
<li>If a user is already logged in, associate this new account with the user so that they can log in using either service or post to both services using respective APIs.</li>
</ul>

<p>The point here is that OmniAuth doesn&#8217;t assume that you simply want to log a user in. It lets you make that judgment call and gives you all the information you need to do just about anything you need to do.</p>

<p>OmniAuth works right now for a wide variety of providers, and this list will continue to grow. OmniAuth today supports:</p>

<ul>
<li>Facebook</li>
<li>Twitter</li>
<li>37signals ID</li>
<li>Foursquare</li>
<li>LinkedIn</li>
<li>GitHub</li>
<li>OpenID (meaning Yahoo, Aol, Google, and many more)</li>
<li>Google Apps (via OpenID)</li>
<li>CAS (Central Authentication Service)</li>
<li>LDAP</li>
</ul>

<h3>A Breath of Fresh Auth</h3>

<p>OmniAuth has been my worst-kept secret library for some time now. I&#8217;ve been using it as the go-to authentication strategy for new projects big and small for the last few months, and it feels really refreshing to have so much control over authentication without losing the drop-in ease of use. If you need external authentication but have found existing solutions to lack flexibility, please take a look!</p>

<p>OmniAuth is <a rel="nofollow" target="_blank" href="http://github.com/intridea/omniauth">on GitHub</a> with a growing set of documentation on the <a rel="nofollow" target="_blank" href="http://github.com/intridea/omniauth/wiki">GitHub wiki</a> and I have also set up a <a rel="nofollow" target="_blank" href="http://groups.google.com/group/omniauth">Google Group</a> to handle any questions that might arise.</p><img src="http://feeds.feedburner.com/~r/intridea/~4/DPyA5QdZvd0" height="1" width="1"/>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/09/13/a-web-developer-goes-native-with-android/">A Web Developer Goes Native (With Android)</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-09-13T00:00:00+08:00" pubdate data-updated="true">Sep 13<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>In the past week I&#8217;ve jumped head-first into Android development for a new Intridea project. This is my first time doing any real Android development as well as my first jump back to Java since I graduated from college. I thought it might be interesting to catalog some of my experiences developing for the platform, so here they are:</p>

<p style='float:right;'><img src="http://img.skitch.com/20100912-xu2q3a9rskk9aj8wappskhh1rr.jpg"/></p>


<h3>Things I Loved</h3>

<p><strong>Intents:</strong> Android is built on an &#8220;Intents&#8221; system. When you want the user to perform some kind of common action, you create an intent for it and activate that intent. Different applications can hook into the same intents, allowing the user to completely customize how they handle a given action.</p>

<p>Wow, what a brilliant system. Android is built from the ground up for insane levels of interoperability between applications. It took no time at all to get a basic QR code scanning process flowing thanks to intents, and the same went for composing e-mails and opening web pages. Literally couldn&#8217;t be simpler.</p>

<p><strong>Activities:</strong> The base unit of an Android application is an activity. An Activity class is what holds the context for your application as well as manages on-screen events and more. One application may have many activities, divided up logically based on user actions.</p>

<p>Once I was able to wrap my head around the idea that any given &#8220;screen&#8221; is really more like an &#8220;activity&#8221; that the user performs, the logic of the application design really fell into place. I think this is a perfect level of abstraction for a mobile platform, and it really made it easy to figure out where to draw the line between one screen and the next.</p>

<p><strong>On-Phone Debugging:</strong> My mouth actually dropped open the first time I plugged my Nexus One in and hit &#8220;Run&#8221; in Eclipse. In just 5-10 seconds my app was launching natively on my phone for me to test. Not only that, but I was still able to see logs and uncaught exceptions as the program ran. Running on the phone is also <strong>lots</strong> faster than running in the emulator.</p>

<p><strong>Resources and NineScale:</strong> Google has come up with a very elegant solution to the idea of handling binary and other resources in Android projects. All of the resources in a directory are pre-compiled into a big reference file called <code>R.java</code> that simply contains access to every menu, image, string, and view that you&#8217;ve created for the application. This makes it so easy to transition between referencing resources in the XML and the code, because it all uses a similar syntax. Great stuff.</p>

<p>When designing views, you will often want to have image-based backgrounds that intelligently stretch to fit their contents. This is called various things in different platforms and tools (NinePatch, NineScale, 9-Slice, etc.). Google&#8217;s implementation is very simple and can be done without extra plugins from any image editor (it&#8217;s just a 1px border around an ordinary <code>.png</code> file). Once again, very cleverly designed.</p>

<p><strong>The Overall Architecture:</strong> Android overall just feels like it was really put together with a lot of thought and care. Everything fits together really well and even people without hardly any desktop or previous mobile application development experience can pick it up relatively quickly. Also, the documentation is pretty extensive (though it would be great to have an even more exhaustive list of code examples of various aspects of the API).</p>

<p style='float:right;'><img src="http://img.skitch.com/20100912-rd3xpgd6ugp51j9jb71tferixy.jpg"/></p>


<h3>Things I Didn&#8217;t Love Quite So Much</h3>

<p><strong>Compiling:</strong> When you&#8217;re used to viewing changes to your application just by clicking &#8220;Refresh&#8221; it can definitely feel like a waste of time to have to compile and run the app. There&#8217;s absolutely nothing that can really be done about this (it is a native app, after all) and Google has gone out of their way to make the process feel as responsive as possible, but it&#8217;s still an unwelcome break in the development cycle for someone used to working on web apps.</p>

<p><strong>Where&#8217;s My CSS?</strong> I&#8217;m guessing that some people will disagree with me here, but wow did I ever miss CSS when building an Android application. CSS makes it <strong>so easy</strong> to rapidly and iteratively style things. Android has a few ways to style things that definitely help over repetitive copy and paste XML attributes, but the expressiveness and power of CSS is sorely missing from building interfaces in Android.</p>

<p><strong>Exceptions:</strong> When running an application in the emulator or on the phone, I really wanted a clear and easy way to view stack traces. The LogCat view on Eclipse is the way to do this, but I found a few problems with it:</p>

<ol>
<li>The stack traces don&#8217;t list the exception you&#8217;re looking for at the top of the trace, but rather about half-way down. Takes a while to wade through and figure out what to look at.</li>
<li>When I tried to use the debugger, I never got any useful output or link-to-line type help that I expected from a fully integrated IDE. Maybe I was using it wrong, but it didn&#8217;t help me out much.</li>
</ol>


<p><strong>Java:</strong> OK, OK, could take some flak for this one, but after developing full-time with Ruby for more than three years now, going back to Java feels like an unbearable chore. There&#8217;s so much boilerplate code and I found myself really missing the simple, expressive, concise idioms of Ruby. Maybe once <a href="http://www.mirah.org/">Mirah</a> gets a little more mature I can at least ease that part of the Android experience.</p>

<p><strong>SQLite:</strong> I know that it&#8217;s the go-to solution for small, simple storage, but <em>why on earth do mobile platforms have schema-driven data stores by default</em>? What a ridiculously square peg to pound into the round hole of mobile data persistence. You know what the default data store for mobile ought to look like? <a href="http://code.google.com/p/redis/">Redis</a>. If I had the simple data structure support provided in Redis (key-value, lists, and sets with simple combinatorial commands), I wouldn&#8217;t need anything more for 99.9% of the applications I can think of. SQL is an awful, terrible fit for mobile and I hope that one day someone realizes it.</p>

<p>I&#8217;m glad to see that <a href="http://www.couch.io/android">CouchDB</a> is trying to disrupt this space a little, and I hope that the disruption continues with more datastores and more choices being available for mobile development.</p>

<h3>Wrapping Up</h3>

<p>It was certainly an interesting week and I&#8217;ve been learning a lot. Android development is starting to come more naturally (looking things up on the API docs maybe every 5 minutes instead of every 30 seconds) and I&#8217;m actually starting to enjoy myself. It&#8217;s really satisfying building something that I can immediately run on my Nexus One, and I definitely look forward to working more with the platform in the future.</p>

<p>That being said, I don&#8217;t think I would choose to develop for mobile applications as my primary focus. While mobile development is certainly rapid compared to old-school desktop development, I still don&#8217;t think anything can match the ease and speed with which web applications can be developed. Since I&#8217;m ultimately more interested in ideas and solving the big-picture puzzles of applications than the low-level implementation details, web is still the place to be for me (for now).</p>

<p>And so we&#8217;ve reached the end of this rather wordy spiel; hopefully if you&#8217;re a web developer you can read this and get some idea of what it would be like to dive into mobile development, and if you&#8217;re already a mobile developer maybe you can tell me how I&#8217;m all wrong about everything I&#8217;ve just written. And maybe, just maybe, if you work for Google you&#8217;ll implement Redis as the primary datastore for Android 3.0. Hey, a guy can hope, can&#8217;t he?</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/06/22/on-android-and-custom-uis/">On Android and Custom UIs</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-06-22T00:00:00+08:00" pubdate data-updated="true">Jun 22<span>nd</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p style='float: right; margin: 0 0 0 10px;'><img src='http://img.skitch.com/20100619-jy7ypsc6ws35ikjs3xcd6rasmc.jpg' alt='Android UI Fragmentation'/></p>
<p>Google&#8217;s Android has seen an incredible rise in popularity since its first handset was launched less than two years ago. Google has worked hard to earn that popularity, regularly releasing fantastic new improvements to the platform in the form of Donut, Eclaire, and now Froyo. Unfortunately, many users of the Android ecosystem won&#8217;t see these improvements for years, if at all. The reason? Manufacturers of Android handsets are building custom versions of the OS to add eye-candy and make the UI seem more attractive, at the expense of upgradeability.</p>
<p><span class="caps">HTC</span> has its <strong>Sense UI</strong> and Motorola has <strong><span class="caps">MOTOBLUR</span></strong>. Samsung and Sony have also thrown their hats into the &#8220;heavily modified UI&#8221; ring. While these packages may serve to help differentiate from the competition, they are hammering the Android ecosystem by causing fragmentation (and yes, <a href="http://android-developers.blogspot.com/2010/05/on-android-compatibility.html">I do think that&#8217;s the right word</a>). But it isn&#8217;t all their fault. One can certainly understand how, when competing against the likes of the iPhone, manufacturers would want to &#8220;pretty up&#8221; the Android experience. So I&#8217;ve got a few words for these OEMs, and Google as well.</p>
<h3>Dear Google</h3>
<p>I&#8217;m really happy that you&#8217;re <a href="http://www.androidguys.com/2010/06/18/android-team-shifting-focus-user-experience-gingerbread/">&#8216;laser focused&#8217; on the user experience</a> for the next release. Now that you&#8217;ve got it humming at lightning speed with Froyo, it&#8217;s time to add some polish. Fantastic. But making a better stock UI isn&#8217;t the only thing that needs to happen to prevent this fragmentation.</p>
<p>You should be doing everything you can to prevent version fragmentation because it&#8217;s hurting developers and consumers. When people with G1s see &#8220;official Android Twitter client released&#8221; but can&#8217;t download it, they&#8217;ll get frustrated. They don&#8217;t know or care about the fact that the G1&#8217;s limited internal storage means that it <strong>can&#8217;t</strong> get the next upgrade, they only care that they&#8217;re supposed to have an Android but they can&#8217;t get the software they want.</p>
<p>Here&#8217;s my advice: take the feature lists of Sense and <span class="caps">MOTOBLUR</span> et al as a laundry list of areas where your <span class="caps">API</span> needs more robustness. If the capabilities of Sense and <span class="caps">MOTOBLUR</span> were exposed at an application level, this problem would simply disappear. You&#8217;ve built your platform to be backwards-compatible; if <span class="caps">HTC</span> wants to build a &#8220;Sense UI&#8221; app that changes the appearance of the UI and adds a bunch of widgets, and they want to make that only available on their handsets, more power to them. When the next version of Android comes out, it&#8217;ll all work seamlessly because they&#8217;ve simply <strong>built an app</strong>, like any other developer.</p>
<p>So keep up the good work on Gingerbread, I&#8217;m looking forward to the UI improvements. But also make your UI reachable by applications, provide hooks into the very guts of Android so that manufacturers and developers alike can really &#8220;make it their own&#8221; without building a custom <span class="caps">ROM</span>.</p>
<h3>Dear <span class="caps">HTC</span>/Motorola/Samsung/Etc.</h3>
<p>Thank you for making Android handsets. I&#8217;m a huge supporter of the platform, and the level of competition and innovation on Android phones has been amazing. Keep it up! But you&#8217;re doing yourselves a disservice by building these custom UIs that inhibit the Android version upgrade process.</p>
<p>Google has huge teams of people working to continuously upgrade the Android experience. You get the fruits of this labor <strong>100% for free</strong>. I understand that as a handset manufacturer the idea of upgradeable phones isn&#8217;t necessarily the most appealing: if people can upgrade the software on their phones, maybe they won&#8217;t want a new one in 2 years! But trust me, you&#8217;ve shown that you&#8217;ll make the hardware good enough that people <em>will</em> want new phones.</p>
<p>Instead of locking down a handset to a specific Android version, create an unbeatable suite of <em>applications</em> that comes pre-loaded on your phone. Work on top of, instead of within, the Android operating system. Then you can leverage all of Google&#8217;s work and all of your own work to provide customers with a great experience. Work with Google to add pieces of <span class="caps">API</span> that will help you provide all of the value you want to provide; I&#8217;m sure Google would be happy to help as best it can.</p>
<p>Also, while I&#8217;m at it, can one of you please create a 4.3&quot; handset running the stock Froyo UI sometime before November? I&#8217;d love to get a big-screen phone when my contract&#8217;s up, but I don&#8217;t know that I can handle dealing with these custom UI jobs. It&#8217;s just not for me.</p>
<h3>Unicorns and Rainbows</h3>
<p>I think that Android is a very important project that came along at just the right time. It has applications far beyond mobile handsets and we&#8217;ll begin seeing Android in cars, tablets, and more in the very near future. This will mean <em>even more</em> work will be poured into the Android ecosystem creating greater and greater benefits for everyone from consumers to handset manufacturers. All that needs to happen to take advantage of those benefits is for Google to help handset manufacturers free themselves of the idea that they need to &#8220;make it their own&#8221;.</p>
<p>I&#8217;m looking forward to the next 40 Android phones, and the 100 after that. I truly think that Android is going to dominate the mobile market five years from now (Apple will still have about the same piece of the pie, but Android will have displaced <span class="caps">RIM</span> and Microsoft entirely). So keep up the good work, but how about we all just get along in the meantime.</p></div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/06/14/multi-json-the-swappable-json-handler/">MultiJSON: The Swappable JSON Handler</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-06-14T00:00:00+08:00" pubdate data-updated="true">Jun 14<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><span class="caps">JSON</span> has become ubiquitous. From Facebook and Twitter both declaring it to be the preferred (and in some cases only) option for <span class="caps">API</span> access to the new OAuth 2.0 draft spec declaring that <span class="caps">JSON</span> is the only acceptable response format for OAuth token responses, <span class="caps">JSON</span> is here to stay. What isn&#8217;t ubiquitous, however, are people&#8217;s preferred implementations.</p>
<p>As library authors it is our duty to try to support as large a part of the community as possible and do so in a friendly manner. To that end, today we&#8217;re releasing <strong>MultiJSON</strong>, a simple library that allows you to seamlessly provide multiple <span class="caps">JSON</span> backends for your library with intelligent defaulting. Install with a simple <code>gem install multi_json</code> and then get started like so:</p>
<div>
<pre><code class='ruby'>require 'multi_json'
<ol>
	<li>Decode using default engine.<br />
MultiJson.decode(&#8216;{&quot;abc&quot;:&quot;def&quot;}) # =&gt; {&quot;abc&quot; =&gt; &quot;def&quot;}&#8217;)</li>
</ol>
<ol>
	<li>Set an engine using a symbol.<br />
MultiJson.engine = :active_support</li>
</ol>
<ol>
	<li>Encode using ActiveSupport<br />
MultiJson.encode({:abc =&gt; &quot;def&quot;}) # =&gt; &#8216;{&quot;abc&quot;:&quot;def&quot;}&#8217;</code></pre><br />
</div></li>
</ol>
<p>This gem is primarily for library authors, allowing you to use the best <span class="caps">JSON</span> available on the users&#8217; systems without explicitly requiring one library over another. This way you can be sure that your <span class="caps">JSON</span> handling will work across implementations (e.g. JRuby) as well as requiring as little extra code as possible (the gem detects existing libraries before requiring more by default).</p>
<p>Engines supported by default are:</p>
<ul>
	<li><code>yajl-ruby</code></li>
	<li><code>json</code> (gem)</li>
	<li><code>active_support</code></li>
	<li><code>json_pure</code></li>
</ul>
<p>We hope that this will make development of <span class="caps">JSON</span>-relying libraries a little bit less of a headache for library authors and users alike. The code is, as always, <a href="http://github.com/intridea/multi_json">available on GitHub</a>.</p></div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/06/01/authbuttons-free-open-source-web-app-icons/">AuthButtons: Free and Open Source Web App Icons</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-06-01T00:00:00+08:00" pubdate data-updated="true">Jun 1<span>st</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>More and more web applications are providing external logins through sites such as Twitter, Facebook, and more.  It can be a bit of a pain to assemble suitable buttons for all of these services to display as the &#8220;<span class="caps">NASCAR</span> box&#8221; of logos for users to click when signing up or on to a site.</p>
<p>To make this a little bit easier, Intridea is releasing a collection of free and open-source logo buttons for use, well, however you&#8217;d like, but probably for these types of authentication scenarios. This collection is starting with twelve buttons:</p>
<p align='center'><a href='http://github.com/intridea/authbuttons' style='border:none'><img src='http://img.skitch.com/20100601-r69wti94eepdcb8ti3y6areqqi.jpg' alt='Logo Images'/></a></p>
<p>The initial set created are for Twitter, Facebook, Myspace, OpenID, Google, Yahoo, Basecamp, Campfire, Present.ly, Aol, LinkedIn, and GitHub.</p>
<p>This collection will grow over time as we get suggestions (or forks) of new iconography. The idea is simply to provide a clean, consistent set of icons that can be used to represent some of the web&#8217;s most popular services. Each icon is available in 32&#215;32, 64&#215;64, 128&#215;128, and 256&#215;256 PNGs as well as an Illustrator CS4 source file that contains all of the buttons and individual CS3 .<span class="caps">EPS</span> files that contain each button individually.</p>
<p>To see a full download grid for each icon, visit the <a href="http://github.com/intridea/authbuttons">GitHub Project Page</a>. If you have a logo you&#8217;d like to see included, please add a request for it to the <a href="http://github.com/intridea/authbuttons/issues">GitHub Issues Page</a></p></div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/04/29/rest-isnt-what-you-think-it-is/">REST Isn&#8217;t What You Think It Is (and That&#8217;s OK)</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-04-29T00:00:00+08:00" pubdate data-updated="true">Apr 29<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Everyone says they have a <span class="caps">REST</span> (or RESTful or <span class="caps">REST</span>-like) <span class="caps">API</span>. <a href="http://apiwiki.twitter.com/REST-API-Documentation">Twitter does</a>, <a href="http://wiki.developers.facebook.com/index.php/API">Facebook does</a>, as does <a href="http://www.twilio.com/docs/api/2008-08-01/rest/">Twilio</a> and <a href="http://gowalla.com/api/docs">Gowalla</a> and even <a href="http://code.google.com/apis/ajaxsearch/documentation/#fonje">Google</a>. However, by the actual, original definition, none of them are truly RESTful. But that&#8217;s OK, because your <span class="caps">API</span> shouldn&#8217;t be either.</p>
<h3>The Common Definition</h3>
<p>The misconception lies in the fact that, as tends to happen, the popular definition of a technical term has come to mean something entirely different from its original meaning. To most people, being RESTful means a few things:</p>
<ol>
	<li>Well-defined URIs that &#8220;represent&#8221; some kind of resource, such as &#8220;/posts&#8221; on a blog representing the blog posts.</li>
	<li><span class="caps">HTTP</span> methods being used as verbs to perform actions on that resource (i.e. <code>GET</code> for read operations and <code>POST</code> for write operations).</li>
	<li>The ability to access multiple format representations of the same data (i.e. both a <span class="caps">JSON</span> and an <span class="caps">XML</span> representation of a blog post).</li>
</ol>
<p>There are some other parts of the common vocabulary of <span class="caps">REST</span> (for example, for some developers being RESTful would also imply a <span class="caps">URI</span> hierarchy such that <code>/posts/{uniqueid}</code> would be seen to be a member of the <code>/posts</code> collection), but these are what most people think of when they hear &#8220;RESTful web service.&#8221; So how is this different from the &#8220;actual&#8221; definition of <span class="caps">REST</span>?</p>
<h3>Diverging From Canon</h3>
<p>By the common definition of <span class="caps">REST</span>, a service defines a set of resources and actions that can be accessed via <span class="caps">URI</span> endpoints. However, the &#8220;true&#8221; definition of <span class="caps">REST</span> demands that resources be self-describing, providing all of the control context in-band of the provided representation. No out-of-band knowledge should, therefore, be required beyond understanding a media type that the resource can provide. From there, it should be possible to follow relations provided in &#8220;hypertext&#8221; context of the representation to &#8220;transfer state&#8221;, follow relations, or perform any necessary actions.</p>
<p>Another common divergence comes through the practice of using <span class="caps">HTTP</span> <code>POST</code> (or <code>PUT</code>) bodies with key-value pairs to create and update documents. In a canonically RESTful service clients should be posting an actual representation of the document in an accepted media type that is then parsed and translated by the service provider to create or update the resource.</p>
<p>Still more divergence comes in the common practice of denoting collections and elements. A truly RESTful web service has no concept of a &#8220;collection&#8221; of resources. There are only resources. As such, the proper way to implement a collection would be to define a separate resource that represents a collection of other resources.</p>
<h3>Is anything truly RESTful?</h3>
<p>Pretty much everyone who claims to have a <span class="caps">REST</span> <span class="caps">API</span>, in fact, does not. The closest I&#8217;ve found is the <a href="http://kenai.com/projects/suncloudapis/pages/Home">Sun Cloud <span class="caps">API</span></a> which actually defines a number of custom media types for resources and is discoverable based on a single known end-point. Everyone else, thanks for playing.</p>
<p>There is, however, one public and <strong>extremely</strong> widely used system that is entirely RESTful. It&#8217;s called the world wide web. Yes, as you&#8217;re browsing the internet you&#8217;re engaging in a <span class="caps">REST</span> service by the true definition of the name. Does your browser (the client) know whether it&#8217;s displaying a banking website or a casual game? Nope, it just utilizes standard media types (<span class="caps">HTML</span>, <span class="caps">CSS</span>, Javascript) to compose and represent the data. You don&#8217;t have to know the specific <span class="caps">URL</span> you&#8217;re looking for on a website so long as you know the &#8220;starting place&#8221; (usually the domain name) and can navigate there.</p>
<p>So <span class="caps">REST</span> by its original definition is far from useless. In fact, it&#8217;s an ingenious and flexible way to allow for the consumption and traversal of network-available information. What it&#8217;s not, however, is a very good roadmap toward building APIs for web applications.</p>
<h3>Real <span class="caps">REST</span> is too hard.</h3>
<p>Truly RESTful services simply require too much work to be practical for most applications. Too much work from the provider in defining and supporting custom media types with complex modeled relationships transmitted in-band. Too much work for clients and library authors to perform complex aggregation and re-formulation of data to make it conform to the real <span class="caps">REST</span> style. Real <span class="caps">REST</span> is great for generic, broad-encompassing multi-provider architectures that need the flexibility and discoverability it provides. For most application developers it&#8217;s simply overkill and a real implementation headache.</p>
<p>There&#8217;s nothing wrong with the common definition of <span class="caps">REST</span>. It&#8217;s leaps and bounds better than some of the methods that came before it and pretty much everyone is already on board and familiar with how it works. It&#8217;s a pragmatic solution that really works pretty well for everyone. As they say, if it ain&#8217;t broke, don&#8217;t fix it.</p>
<h3>What&#8217;s in a name?</h3>
<p>The only problem is that now we have lots of things that we&#8217;re calling <span class="caps">REST</span> that aren&#8217;t. Roy T. Fielding, primary architect of <span class="caps">HTTP</span> 1.1 and the author of the dissertation that originally defines <span class="caps">REST</span>, <a href="http://roy.gbiv.com/untangled/2008/rest-apis-must-be-hypertext-driven">hasn&#8217;t always been happy with people calling things <span class="caps">REST</span> that aren&#8217;t</a>. And maybe he has a point: these services certainly aren&#8217;t <span class="caps">REST</span> by his definition and because of the wide propagation of this incorrect definition of <span class="caps">REST</span> most people now don&#8217;t really understand the true definition. In fact, I don&#8217;t claim to have a great understanding of <span class="caps">REST</span> as Dr. Fielding defines it.</p>
<p>The problem is that the ship has sailed, and whether it&#8217;s true or not, <span class="caps">REST</span> now <strong>also</strong> means any simple, <span class="caps">URL</span>-accessible resource-based service. Perception is reality, and perception has changed about the definition of <span class="caps">REST</span> and RESTful. While the true definition is interesting for academic purposes and certainly lies behind the technologies upon which we build every day, it simply doesn&#8217;t have a whole lot of use to web application developers. The fact that (nearly) zero services exist that implement true <span class="caps">REST</span> for their <span class="caps">API</span> serves as testament to that.</p>
<h3>What can we learn from <span class="caps">REST</span>?</h3>
<p>Just because we don&#8217;t use true <span class="caps">REST</span> doesn&#8217;t mean there aren&#8217;t a few things we can learn from it. There are a few aspects that I&#8217;d love to see come into favor in the common definition. The idea of clients needing to know a few media types instead of specific protocols for each service is one that breaks down in practice for APIs due to the overwhelming number of web services with different needs in terms of domain-specific resource definition. However, wouldn&#8217;t it be great if there were an accepted  <code>application/x-person+json</code> format that provided a standardized batch of user information (such as name, e-mail address, location, profile image <span class="caps">URL</span>) that you could request from Facebook, Twitter, Google or any OpenID provider and expect conforming data? Just because there are lots of domain-specific resources doesn&#8217;t mean that it isn&#8217;t worthwhile to try to come up with some standards for common information.</p>
<p><span class="caps">REST</span>-like discoverability could also be a boon for some services. What if Twitter provided something like this along with a tweet&#8217;s <span class="caps">JSON</span>?</p>
<pre name='code' class='json'>{
  "actions": {
    "Retweet" : { "method":"POST", url:"/1/statuses/retweet/12345.json" },
    "Delete" : { "method":"DELETE", url:"/1/statuses/destroy/12345.json" },
    "Report Spam" : { "method":"POST", url:"/1/statuses/retweet/12345.json", params:{"id":12345} }
  }
}</pre>
<p>So while <span class="caps">REST</span> as originally intended may not be a great fit for web applications, there are still patterns and practices to be gleaned from a better understanding of how such a service could work. For web applications, the case may be that <span class="caps">REST</span> is dead, long live <span class="caps">REST</span>!</p></div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/2/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2012/02/01/test-chinese/">Guest Post on RubyLearning: 中文Building DSLs with yield and instance_eval</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/01/17/2/">MultiJSON: The Swappable JSON Handler</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/01/16/testtesttest/">teesesest</a>
      </li>
    
      <li class="post">
        <a href="/blog/2010/11/30/rubylearning-guest-post/">Guest Post on RubyLearning: Building DSLs with yield and instance_eval</a>
      </li>
    
      <li class="post">
        <a href="/blog/2010/10/03/omniauth-flexible-authentication-for-rack/">OmniAuth: Flexible, Unassuming Multi-Provider Authentication for Rack</a>
      </li>
    
  </ul>
</section>






  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2012 - xiaori.liu -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
